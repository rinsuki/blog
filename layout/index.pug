extends ./layout

block body
    if tag
        h1(style="margin: 0 0 24px;")
            | タグ
            | #{tag} が付いた記事一覧
    for post in posts
        article.panel.panel-default
            .panel-body
                h1.title: a.title(href=post.path)= post.name
                small.article-meta
                    span
                        span.glyphicon.glyphicon-time
                        | 投稿: #{post.created_at}
                    if post.tags.length
                        span
                            span.glyphicon.glyphicon-tags
                            | タグ: 
                            each tag in post.tags
                                a.article-tags(href="/tags/" + tag) #{tag}
                                span.article-tags-after
                if post.excerpt
                    != post.excerpt
                    p: a(href=post.path) 続きを読む
                else
                    != post.body_html
    if page.total
        .pagination_wrapper
            nav
                mixin pager_content(href, disabled, active)
                    li(class={disabled, active}): a(href=(disabled || active) ? undefined : href)
                        block
                ul.pagination
                    - var base_url = page.current_url.replace("page/"+page.current+"/", "")
                    +pager_content(base_url, page.current === 1)= "<<"
                    +pager_content(page.prev_link, page.current === 1)= "<"
                    - var n = 1
                    while n < page.current
                        +pager_content((n == 1) ? base_url : base_url+"page/"+n+"/")= n
                        - n++
                    +pager_content(page.current_url, false, true)= page.current
                    - n++
                    while n <= page.total
                        +pager_content((n == 1) ? base_url : base_url+"page/"+n+"/")= n
                        - n++
                    +pager_content(page.next_link, page.total === page.current)= ">"
                    +pager_content(base_url+"page/"+page.total+"/", page.total === page.current)= ">>"